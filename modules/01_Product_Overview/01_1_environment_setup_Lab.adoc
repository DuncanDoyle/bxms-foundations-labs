:scrollbar:
:data-uri:
:toc2:
:bpmsuite_template: link:https://raw.githubusercontent.com/gpe-mw-training/bxms_decision_mgmt_foundations_lab/master/bpmsuite70-full-mysql.json[BPM Suite Template^]
:bpmsuite_mysql_secret: link:https://raw.githubusercontent.com/gpe-mw-training/bxms_decision_mgmt_foundations_lab/master/bpmsuite-app-secret.json["BPM Suite - MySql Secret^"]
:linkattrs:

== Environment Setup Lab

The first two labs of this course provide an overview of the _Business Central_ and _Process Server_ components of Red Hat Process Automation Manager.

In this lab, you use Red Hat OpenShift Container Platform to provision a Business Central environment. You use this environment to create your business assets.

.Goals
* Order a Red Hat Process Automation Manager lab environment
* Log in to the Business Central web application

.Prerequisites
* Broadband internet connectivity
* An up-to-date browser, such as Google Chrome or Firefox
* Red Hat Online Partner Enablement Network--Training Learning Center (OPENTLC) credentials

:numbered:

== Set Up Red Hat Process Automation Manager Environment

In this lab, you order a dedicated virtual machine that is pre-installed with the OpenShift and Decision Manager products.
This lab environment is hosted in the cloud.

. In your browser, navigate to the link:https://labs.opentlc.com/[OPENTLC lab portal]:
+
image::images/cf_login.png[]

. Enter your OPENTLC username and password, and click *Login*.
. Navigate to *Services -> Catalogs -> OPENTLC Middleware Solutions Labs*:
+
image::images/cf_course_selection_project.png[]

. Select `PAM 7 Foundations` and then click *Order*:
. Click the check box that says: _Check this box to confirm that you understand and know your runtime and expiration dates_.
+
Notice that the _runtime_ is set up 8 hours.
+
Every 8 hours you will need to return to https://labs.opentlc.com to either extend the duration of the runtime for another 8 hours or re-start if the environment has alreaay shutdown.

. In the next panel, click *Submit* in the lower right corner.
* This initiates a process to provision a full Red Hat Decision Manager lab environment.


=== Confirmation Emails

Upon ordering the lab environment, you will receive the following two emails:

. *Your lab environment is building*
.. Save this email.
.. This email Includes details of the three VMs that make up your lab application similar to the following:

.. Make note of the 4 digit GUID (aka: REGION CODE)
+
* Whenever you see "GUID" or "$GUID" in a command, make sure to replace it with your GUID.

.. Make note of the URL of the `workstation` VM.
+
You will use this when ssh'ing to your application.

.. Make note of the URL of the `master` VM.
+
You will use this when accessing the OCP Web Console.

** The OpenShift master URL varies based on the region where you are located, and may vary from the example shown above.
** For the duration of the course, you navigate to this OpenShift Container Platform master node.

. *VM ready for authentication*
+
Once you receive this second email, you can then ssh into the `workstation` VM of your Ravello application.

=== SSH Access and `oc` utility

SSH access to the remote lab environment provides you with the OpenShift `oc` utility.

. ssh access to the Ravello application is provided using the following convention:
+ 
-----
$ ssh <opentlc-userId>@<workstation URL as listed in 1st confirmation email>
-----


. Authenticate into OpenShift using `oc` utility
+ 
-----
$ oc login https://master00.example.com -u user1 -p r3dh4t1!
-----


. OCP cluster admin access
.. Cluster admin access to the your OpenShift environment is provided but is not required for this course.
.. If you need OpenShift cluster-admin access, execute the following: 
+
-----
$ sudo -i
# oc whoami

system:admin
-----
+
[blue]#Make sure to exit out of the root shell after every use#

=== OCP Web Console

. Point your browser to the following URL:
+ 
-----
$ https://<master node URL as listed in 1st confirmation email>
-----

. Authenticate using the following user credentials
.. Username:    user1 
.. Password:    r3dh4t1!


== Review OpenShift Container Platform Components


=== Explore Deployments

. In the OCP web console, select the project with the name similar to `rhpam-dev-user1`.
. In the left panel of your Red Hat OpenShift Container Platform project home page, navigate to *Applications -> Deployments*.

. Examine the three deployments and expect to see that they all have a status of `Active, 1 replica`:

. Review the descriptions of each of these applications:
+ 
[cols="1,4",options="header"]
|=====
| Application Name | Description
|`rhpam-bc` | Business Central component where version-controlled process authoring occurs
|`rhpam-kieserver` | Process Server component where process execution occurs
|`rhpam-postgresql` | Database where process state is persisted
|=====

=== Explore Routes
. In the left panel, navigate to the *Applications -> Routes* section.
. Note the URL to your `rhpam-bc` route:

== Log In to Business Central

. Click the link to open a new tab in your browser showing the Business Central web application of Red Hat Process Automation Manager:
+
image::images/bc-login.png[]

. Log in to Business Central using these credentials:
* *Username*: `adminUser`
* *Password*: `admin1!`

* Verify that you see the Business Central home page:
+
image::images/bc-home.png[]


== Review Known Issues

Red Hat's engineering team is investigating two known issues--Business Central's long load time and the display of incorrect information.

.Long Load Times

Sometimes Business Central takes a long time to load. You can refresh your browser to make use of your browser cache and improve the load time in subsequent attempts to load the UI.

.Inconsistent State

In some cases, Business Central does not correctly display the expected information on a page after an action or remains in the loading state.

* In this case, you can press the `F5` key to refresh your browser and reload the Business Central web page.
* When you try the exercise again, you can expect it to work.
